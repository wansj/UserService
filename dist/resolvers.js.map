{"version":3,"sources":["../resolvers.js"],"names":["jwt","require","resolvers","User","id","obj","args","context","info","_id","role","models","Role","byId","Friend","initiator","whose","Query","getCaptcha","publicKey","roles","listRoles","availableRoles","users","listUsers","user","userByName","byName","logedUser","getLogedUser","getFriends","userByNameOrEmail","byNameOrEmail","unHandledFriendship","getUnapprovedFriends","Mutation","createRole","delRole","delete","editRole","update","signUp","delUser","editUser","changePassword","logIn","logOut","addFriend","approveFriendship","approveFriend"],"mappings":"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","file":"resolvers.js","sourcesContent":["import { getPublicKey } from './utils'\n\nconst jwt = require('jsonwebtoken')\n\nconst resolvers = {\n  User: {\n    id(obj, args, context, info) {\n      return obj._id\n    },\n    role(obj, args, context, info) {\n      return context.models.Role.byId(obj.role)\n    }\n  },\n  Role: {\n    id(obj, args, context, info) {\n      return obj._id\n    }\n  },\n  Friend: {\n    id(obj, args, context, info) {\n      return obj._id\n    },\n    initiator(obj, args, context, info) {\n      return context.models.User.byId({id: obj.whose})\n    }\n  },\n  Query: {\n    getCaptcha(obj, args, context, info) {\n      return context.models.User.getCaptcha(args)\n    },\n    publicKey(obj, args, context, info) {\n      return getPublicKey()\n    },\n    roles(obj, args, context, info) {\n      return context.models.Role.listRoles()\n    },\n    availableRoles(obj, args, context, info) {\n      return context.models.Role.availableRoles()\n    },\n    users(obj, args, context, info) {\n      return context.models.User.listUsers(args)\n    },\n    user(obj, args, context, info) {\n      return context.models.User.byId(args)\n    },\n    userByName(obj, args, context, info) {\n      return context.models.User.byName(args)\n    },\n    logedUser(obj, args, context, info) {\n      return context.models.User.getLogedUser()\n    },\n    getFriends (obj, args, context, info) {\n      return context.models.Friend.getFriends(args, context)\n    },\n    userByNameOrEmail (obj, args, context, info) {\n      return context.models.User.byNameOrEmail(args)\n    },\n    unHandledFriendship (obj, args, context, info) {\n      return context.models.Friend.getUnapprovedFriends()\n    }\n  },\n  Mutation: {\n    createRole(obj, args, context, info) {\n      return context.models.Role.createRole(args)\n    },\n    delRole(obj, args, context, info) {\n      return context.models.Role.delete(args)\n    },\n    editRole(obj, args, context, info) {\n      return context.models.Role.update(args)\n    },\n    signUp(obj, args, context, info) {\n      return context.models.User.signUp(args)\n    },\n    delUser(obj, args, context, info) {\n      return context.models.User.delete(args)\n    },\n    editUser(obj, args, context, info) {\n      return context.models.User.update(args)\n    },\n    changePassword(obj, args, context, info) {\n      return context.models.User.changePassword(args)\n    },\n    logIn (obj, args, context, info) {\n      return context.models.User.logIn(args)\n    },\n    logOut(obj, args, context, info) {\n      return context.models.User.logOut()\n    },\n    addFriend (obj, args, context, info) {\n      return context.models.Friend.addFriend(args, context)\n    },\n    approveFriendship (obj, args, context, info) {\n      return context.models.Friend.approveFriend(args, context)\n    }\n    // addFriends (obj, args, context, info) {\n    //   return context.models.Friend.addFriends()\n    // },\n    // createSampleUsers (obj, args, context, info) {\n    //   return context.models.User.createSampleUsers()\n    // }\n  }\n}\nexport default resolvers\n"]}